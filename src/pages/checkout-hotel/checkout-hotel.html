<!--
  Generated template for the ProfilePage page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

    <ion-navbar color="primary">
        <ion-title>Reserva de Hotel</ion-title>
    </ion-navbar>

</ion-header>


<ion-content padding class="checkout-hotel common-bg">
    <div class="card round">
        <div class="hotel-bg">
            <!--<div class="bg-filter" text-center></div>-->
            <img src="{{ hotelDetail?.hotel_img }}" alt="" height="240" width="383">
        </div>

        <div class="border-bottom" padding>
            <h5 no-margin>{{ hotelDetail?.hotel_name }}</h5>
            <span ion-text color="dark"><b>Dirección: </b>{{ hotelDetail?.hotel_address }}</span>
            <div padding-top>
                <span ion-text color="dark"><b>Fecha Entrada: </b>{{ hotelDetail?.checkin_date }}</span>
                <br>
                <span ion-text color="dark"><b>Fecha Salida: </b>{{ hotelDetail?.checkout_date }}</span>
            </div>

            <div padding-top>
                <ion-icon name="person"></ion-icon>
                <span ion-text color="dark">{{ distribution.adults }} adulto(s)</span>
                <br>
                <ion-icon name="person"></ion-icon>
                <span ion-text color="dark">{{ distribution.children }} menor(es)</span>
            </div>

            <div margin-top>
                <span ion-text color="dark">{{ nights }} Noches</span> -
                <span ion-text color="dark" *ngIf="distribution.rooms == 1">{{ distribution.rooms }} Habitación </span>
                <span ion-text color="dark" *ngIf="distribution.rooms > 1">{{ distribution.rooms }} Habitaciones</span>
            </div>
            <div margin-top>
                <span ion-text color="dark"><b>Habitación:</b> {{ hotelDetail?.room_name }}</span>
            </div>
            <div margin-top>
                <span ion-text color="dark"><b>Cancelación:</b> {{ hotelDetail?.room_cancellation }}</span>
            </div>
        </div>

        <!--total price-->
        <div padding>
            <span ion-text color="dark"> <b>Habitación por noche: </b>{{ finalPrice.nightly_subtotal | currency:'USD':true:'1.0-0' }}</span>
            <br>
            <span ion-text color="dark"> <b>Impuestos y tasas: </b>{{ finalPrice.taxes_fee | currency:'USD':true:'1.0-0' }}</span>
            <br>
            <h4 class="pull-left" no-margin>Precio total:</h4>
            <h4 class="pull-right" ion-text color="primary" no-margin>{{ finalPrice.total_prices | currency:'USD':true:'1.0-0'}}</h4>
            <div class="clear"></div>
        </div>
    </div>

    <!--passenger-->
    <div class="card round" margin-top>
        <ion-item-group>
            <ion-list-header no-margin no-padding margin-left>
                <h2><b>Titular de habitación:</b></h2>
            </ion-list-header>
            <div *ngFor="let passenger of formChoice?.passengers; let i = index">
                <ion-item-divider color="light">
                    Habitacion {{i + 1}}
                </ion-item-divider>
                <ion-item>
                    <ion-label>
                        Nombre(s):
                    </ion-label>
                    <ion-input type="text" [(ngModel)]="guestData[i].name" clearInput></ion-input>
                </ion-item>
                <ion-item>
                    <ion-label>
                        Apellido(s):
                    </ion-label>
                    <ion-input type="text" [(ngModel)]="guestData[i].lastname" clearInput></ion-input>
                </ion-item>
                <ion-item>
                    <ion-label>
                        Doc. de Identidad:
                    </ion-label>
                    <ion-input type="tel" maxlength="10" [(ngModel)]="guestData[i].document_number" clearInput></ion-input>
                </ion-item>
            </div>
        </ion-item-group>
    </div>

    <!--more info-->
    <div class="card round" margin-top>
        <ion-item-group>
            <ion-list-header no-margin no-padding margin-left >
                <h2><b>Formas de pago:</b></h2>
            </ion-list-header>

            <div *ngIf="showPayment">
                <div *ngFor="let pay of paymentMethods; let i = index">
                    <div *ngIf="pay.type != 'debit_card'">
                        <div *ngIf="pay.installment_quantity != ''">
                            <div *ngIf="pay.installment_quantity == 1">
                                <ion-item-divider color="light">
                                    <span ion-text color="dark">1 Pago</span>
                                </ion-item-divider>
                                <ion-card *ngIf="pay?.banks.length > 0">
                                    <ion-item-group >
                                        <div *ngFor="let card of pay?.card_ids" class="eva-card-container">
                                            <span [ngClass]=" 'eva-card-body ' + card.codeCard"
                                                  (click)="selected(pay.installment_quantity, card.cardName, '', '')"></span>
                                        </div>
                                    </ion-item-group>
                                </ion-card>
                                <ion-card *ngIf="pay?.banks.length == 0">
                                    <ion-item-group >
                                        <div *ngFor="let card of pay?.card_ids" class="eva-card-container">
                                            <span [ngClass]=" 'eva-card-body ' + card.codeCard"
                                                  (click)="selected(pay.installment_quantity, card.cardName, '', '')"></span>
                                        </div>
                                    </ion-item-group>
                                </ion-card>
                            </div>


                            <div *ngIf="pay.installment_quantity > 1 && pay.type == 'credit_card'">
                                <ion-item-divider color="light">
                                    <span ion-text color="dark">{{pay.installment_quantity}} Cuotas de {{pay?.amounts.installment | currency:'USD':true:'1.0-0'}} </span>
                                    <span ion-text color="dark" *ngIf="pay.amounts.total_interest_amount > 0"> con {{ pay.amounts.total_interest_amount | currency:'USD':true:'1.0-0' }} (interés)</span>
                                    <span ion-text color="dark" *ngIf="pay.amounts.total_interest_amount == 0"> (interés)</span>
                                </ion-item-divider>
                                <ion-card *ngIf="pay?.banks.length > 0">
                                    <ion-item-group *ngFor="let bank of pay?.banks">
                                        <ion-list-header color="light" no-margin>
                                            <span ion-text color="dark"><b>Banco:</b></span>
                                            <span ion-text color="dark">{{bank.name}}</span>
                                            <br>
                                            <div class="eva-card-container">
                                                <span [ngClass]=" 'eva-card-body ' + bank.key"></span>
                                            </div>

                                        </ion-list-header>
                                        <ion-item-group *ngFor="let card of pay?.card_ids" style="display: inline">
                                            <div class="eva-card-container card-bank" *ngIf="card.codeBank == bank.key">
                                                <span [ngClass]=" 'eva-card-body ' + card.codeCard"
                                                      (click)="selected(pay.installment_quantity, card.cardName, bank.name, pay.amounts.total_interest_amount)"
                                                ></span>
                                            </div>
                                        </ion-item-group>
                                    </ion-item-group>
                                </ion-card>
                                <ion-card *ngIf="pay?.banks.length == 0">
                                    <ion-item-group >
                                        <div *ngFor="let card of pay?.card_ids" class="eva-card-container">
                                            <span class=" " [ngClass]=" 'eva-card-body ' + card.codeCard"
                                                  (click)="selected(pay.installment_quantity, card.cardName, '', pay.amounts.total_interest_amount)"
                                            ></span>
                                        </div>
                                    </ion-item-group>
                                </ion-card>
                            </div>
                        </div>

                        <div *ngIf="pay.type == 'at_destination'">
                            <ion-item-divider color="light">
                                Pago destino
                            </ion-item-divider>
                        </div>
                    </div>

                </div>

            </div>

        </ion-item-group>
        <ion-item-group *ngIf="paymentData.card != '' && showBtn == true">
            <button ion-button small (click)="selected('','','','')">Cambiar pago</button>
        </ion-item-group>

        <hr>
        <ion-item-group *ngIf="formChoice?.payment.credit_card">
            <ion-item-divider color="light">
                Formas de Pago
            </ion-item-divider>
            <ion-item *ngIf="formChoice?.payment.credit_card.number">
                <ion-label >
                    Tarjeta:
                </ion-label>
                <ion-input type="text" disabled [(ngModel)]="paymentData.card" clearInput></ion-input>
            </ion-item>
            <ion-item *ngIf="formChoice?.payment.credit_card.number">
                <ion-label>
                    N° de tarjeta:
                </ion-label>
                <ion-input mask="**** **** **** ****" placeholder="0000 0000 0000 0000" maxlength="19"></ion-input>
            </ion-item>
            <ion-item *ngIf="formChoice?.payment.credit_card.expiration">
                <ion-label>Vencimiento</ion-label>
                <ion-datetime displayFormat="MMM-YYYY"
                              min="{{minDate}}" max="{{maxDate}}"
                              [(ngModel)]="paymentData.expiration"
                ></ion-datetime>
            </ion-item>
            <ion-item *ngIf="formChoice?.payment.credit_card.security_code">
                <ion-label >
                    Código:
                </ion-label>
                <ion-input type="number" maxlength="4"  clearInput></ion-input>
            </ion-item>
            <ion-item *ngIf="formChoice?.payment.credit_card.owner_name">
                <ion-label >
                    Titular:
                </ion-label>
                <ion-input type="text" placeholder="Como aparece en la tarjeta" clearInput></ion-input>
            </ion-item>

            <!--<ion-item *ngIf="formChoice?.payment.credit_card.owner_document">
                <ion-label >
                    N° de documento:
                </ion-label>
                <ion-input type="tel" maxlength="10"  clearInput></ion-input>
            </ion-item>-->

            <ion-item *ngIf="formChoice?.payment.credit_card.owner_documenttype">
                <ion-label>Tipo de documento:</ion-label>
                <ion-select interface="popover">
                    <ion-option value="LOCAL">LOCAL</ion-option>
                    <ion-option value="PASSPORT">PASSPORT</ion-option>
                </ion-select>
            </ion-item>

            <ion-item *ngIf="formChoice?.payment.credit_card.owner_documentnumber">
                <ion-label >
                    N° de documento:
                </ion-label>
                <ion-input type="tel" maxlength="10"  clearInput></ion-input>
            </ion-item>

            <ion-item *ngIf="formChoice?.payment.credit_card.owner_gender">
                <ion-label>Género:</ion-label>
                <ion-select interface="popover">
                    <ion-option value="M">Masculino</ion-option>
                    <ion-option value="F">Femenino</ion-option>
                </ion-select>
            </ion-item>

        </ion-item-group>

        <ion-item-group *ngIf="formChoice?.payment.invoice">
            <ion-item-divider color="light">
                Facturación:
            </ion-item-divider>
            <!--<ion-item *ngIf="formChoice?.payment.invoice.billing_address">
                <ion-label >
                    Dirección de facturación:
                </ion-label>
                <ion-input type="tel" maxlength="10"  clearInput></ion-input>
            </ion-item>-->

            <ion-item *ngIf="formChoice?.payment.invoice.invoice_name">
                <ion-label >
                    Nombre:
                </ion-label>
                <ion-input type="text" clearInput></ion-input>
            </ion-item>

            <ion-item *ngIf="formChoice?.payment.invoice.fiscal_document">
                <ion-label >
                    Doc. fiscal:
                </ion-label>
                <ion-input type="tel" mask="**-********-*" placeholder="00-00000000-0" maxlength="13" clearInput></ion-input>
            </ion-item>

            <ion-item *ngIf="formChoice?.payment.invoice.tax_status">
                <ion-label>Situación Fiscal:</ion-label>
                <ion-select interface="popover">
                    <ion-option value="FINAL_CONSUMER">Consumidor Final</ion-option>
                    <ion-option value="REGISTERED">Responsable Inscripto</ion-option>
                    <ion-option value="EXEMPT">Exento</ion-option>
                    <ion-option value="MONOTRIBUTO">Monotributo</ion-option>
                </ion-select>
            </ion-item>

            <!-- if formNewPay.payment.fiscal_document_type is defined  or formNewPay.payment.fiscal_document_prefix_verification_code is defined or formNewPay.payment.entity_type is defined -->
            <!-- formNewPay.payment.document_issuing_country_code -->

        </ion-item-group>

        <ion-item-group *ngIf="formChoice?.payment.invoice.billing_address">
            <ion-item-divider color="light">
                Dirección de facturación:
            </ion-item-divider>

            <ion-item *ngIf="formChoice?.payment.invoice.billing_address.country">
                <ion-label >
                    País:
                </ion-label>
                <ion-input type="text" clearInput></ion-input>
            </ion-item>

            <ion-item *ngIf="formChoice?.payment.invoice.billing_address.street">
                <ion-label >
                    Calle:
                </ion-label>
                <ion-input type="text" clearInput></ion-input>
            </ion-item>

            <ion-item *ngIf="formChoice?.payment.invoice.billing_address.number">
                <ion-label >
                    N°:
                </ion-label>
                <ion-input type="text" clearInput></ion-input>
            </ion-item>


            <ion-item *ngIf="formChoice?.payment.invoice.billing_address.floor">
                <ion-label >
                    Piso:
                </ion-label>
                <ion-input type="text" clearInput></ion-input>
            </ion-item>

            <ion-item *ngIf="formChoice?.payment.invoice.billing_address.postal_code">
                <ion-label >
                    Cod postal:
                </ion-label>
                <ion-input type="text" clearInput></ion-input>
            </ion-item>

            <ion-item *ngIf="formChoice?.payment.invoice.billing_address.department">
                <ion-label >
                    Departamento:
                </ion-label>
                <ion-input type="text" clearInput></ion-input>
            </ion-item>

            <ion-item *ngIf="formChoice?.payment.invoice.billing_address.state_id">
                <ion-searchbar no-margin
                               no-padding
                               [(ngModel)]="state"
                               [showCancelButton]="shouldShowCancel"
                               (ionInput)="onInput($event)"
                               (ionCancel)="onCancel($event)"
                               placeholder="Buscar Provincia">
                </ion-searchbar>
                <!--<ion-input type="text" clearInput></ion-input>-->
                <!--<ion-searchbar
                        no-margin
                        no-padding
                        [(ngModel)]="querySearch"
                        (ngModelChange)="autocomplete(querySearch)"
                        [showCancelButton]="shouldShowCancel"
                        (ionInput)="onSearchInput($event)"
                        (ionInput)="onSearch()"
                        placeholder="Buscar Destino">
                </ion-searchbar>-->
            </ion-item>

            <ion-item *ngIf="formChoice?.payment.invoice.billing_address.city_id">
                <!--<ion-label >
                    Ciudad:
                </ion-label>
                <ion-input type="text" clearInput></ion-input>-->
                <ion-searchbar no-margin
                               no-padding
                               [(ngModel)]="city"
                               [showCancelButton]="shouldShowCancel"
                               (ionInput)="onInput($event)"
                               (ionCancel)="onCancel($event)"
                               placeholder="Buscar Ciudad">
                </ion-searchbar>
            </ion-item>

        </ion-item-group>
        <!--<ion-item class="no-border">
            <ion-icon name="contact" item-left color="dark"></ion-icon>
            <div>
                <span class="bold" ion-text color="dark">Guest Details</span>
                <br/>
                <span ion-text color="dark">Enter your information</span>
            </div>
        </ion-item>-->
    </div>

    <!--payment info-->
    <!--<div class="card round" margin-top>
        <ion-item class="no-border">
            <ion-icon name="ios-card" item-left color="dark"></ion-icon>
            <div>
                <span class="bold" ion-text color="dark">Payment method</span>
                <br/>
                <span ion-text color="dark">Enter credit card</span>
            </div>
        </ion-item>
    </div>-->

    <!--submit button-->
    <button ion-button class="round" color="primary" margin-top full (click)="send()">Reservar</button>
</ion-content>
